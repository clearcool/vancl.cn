<?phpnamespace App\Http\Controllers\home;use Illuminate\Http\Request;use DB;use App\Http\Requests;use App\Http\Controllers\Controller;use Illuminate\Routing\Route;use Cache;class HomeController extends Controller{    public function index()    {        //首页列表信息        $title = [];        $goods = DB::table('shop_type')->where('p_id', '0')->get();        foreach ($goods as $k => $v) {            $goodss = DB::table('shop_type')->where('p_id', $v->st_id)->get();            $title[$v->stname] = [];            for ($i = 0; $i < count($goodss); $i++) {                array_push($title[$v->stname], $goodss[$i]);            }        }        Cache::put('title',$title,30);        return view('home.index', ['title' => $title]);    }    public function headlist()    {	    	//用户列表页    	//$title=Cache::get('title');    	//return view('')    	    }    public function list(Request $request)    {	            	//用户列表页    	$title=Cache::get('title');       //接收数据        if(!isset($title))        {            return redirect()->action('home\HomeController@index');        }        $id = $request->input('id');                //商品遍历        $shop = DB::table('shop')                ->where('st_id',$id)                ->paginate(2);        //商品库存        $shopsales = DB::table('shop')                ->where('st_id',$id)               ->value('Sales');        //类别名查询        $titletype=DB::table('shop_type')                ->where('st_id',$id)                ->value('stname');      //获取所有的请求参数         $all = $request->all();        //解析模板    	return view('home.list',['title'=>$title,'shopsales'=>$shopsales,'titletype'=>$titletype,'shop'=>$shop ,'all'=>$all]);    }   }